{"ast":null,"code":"var _jsxFileName = \"C:\\\\Tr\\u1EA7n Minh Qu\\xFD\\\\Chuy\\xEAn \\u0111\\u1EC1 Nodejs v\\xE0 React\\\\2200008995_TranMinhQuy\\\\2200008995_TranMinhQuy\\\\ProjectReactNodejs\\\\SHOPBANSACH\\\\frontend\\\\src\\\\pages\\\\Cart.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, Fragment, useRef, useContext } from \"react\";\nimport { useNavigate, Link } from 'react-router-dom'; // Import useNavigate để điều hướng\nimport Header from \"./Header\";\nimport Footer from \"./Footer\";\nimport { toast } from 'react-toastify';\nimport { parseVND, formatVND } from '../utils/currency';\nimport { CartContext } from './CartContext';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Cart() {\n  _s();\n  const navigate = useNavigate(); // Tạo hàm điều hướng\n\n  const {\n    cart: items,\n    addToCart,\n    decreaseQuantity,\n    removeFromCart,\n    clearCart: contextClearCart\n  } = useContext(CartContext);\n  const [pendingClear, setPendingClear] = useState(false);\n  const clearTimerRef = useRef(null);\n  const [promoSettings, setPromoSettings] = useState({\n    bulk_discount: 0,\n    bulk_threshold: 5,\n    enable_voucher: false\n  });\n  const [voucherCode, setVoucherCode] = useState('');\n  const [voucherDiscount, setVoucherDiscount] = useState(0);\n  const [voucherError, setVoucherError] = useState('');\n\n  // Hàm cập nhật số lượng sản phẩm\n  const updateQuantity = (id, delta) => {\n    if (delta > 0) {\n      // increase: dùng addToCart với quantity 1\n      const item = items.find(i => i.id === id);\n      if (item) addToCart({\n        ...item,\n        quantity: 1\n      });\n    } else if (delta < 0) {\n      // decrease: gọi decreaseQuantity\n      decreaseQuantity(id);\n    }\n  };\n\n  // Hàm xóa sản phẩm khỏi giỏ hàng\n  const removeItem = id => {\n    removeFromCart(id);\n  };\n\n  // Hàm tính tổng phụ (subtotal) của giỏ hàng\n  const getSubtotal = () => {\n    return items.reduce((total, item) => total + parseVND(item.price) * (item.quantity || 1), 0);\n  };\n\n  // Hàm xóa toàn bộ giỏ hàng (xác nhận không chặn: nhấn 2 lần trong 3s)\n  const clearCart = () => {\n    if (!pendingClear) {\n      setPendingClear(true);\n      toast.warning('Nhấn lại lần nữa trong 3 giây để xác nhận xóa giỏ hàng');\n      if (clearTimerRef.current) clearTimeout(clearTimerRef.current);\n      clearTimerRef.current = setTimeout(() => setPendingClear(false), 3000);\n      return;\n    }\n    setPendingClear(false);\n    if (clearTimerRef.current) {\n      clearTimeout(clearTimerRef.current);\n      clearTimerRef.current = null;\n    }\n    contextClearCart();\n    toast.success('Đã xóa toàn bộ giỏ hàng');\n  };\n\n  // Dọn dẹp timer khi unmount\n  useEffect(() => {\n    return () => {\n      if (clearTimerRef.current) clearTimeout(clearTimerRef.current);\n    };\n  }, []);\n\n  // Fetch promo settings\n  useEffect(() => {\n    axios.get('/api/settings').then(response => {\n      if (response.data && typeof response.data === 'object') {\n        const settings = {};\n        Object.keys(response.data).forEach(key => {\n          settings[key] = response.data[key].value || '';\n        });\n        setPromoSettings({\n          bulk_discount: parseInt(settings['promo.bulk_discount']) || 0,\n          bulk_threshold: parseInt(settings['promo.bulk_threshold']) || 5,\n          enable_voucher: settings['promo.enable_voucher'] === 'true'\n        });\n      }\n    }).catch(error => {\n      console.error('Error fetching promo settings:', error);\n    });\n  }, []);\n\n  // Tính tổng số lượng sản phẩm\n  const getTotalQuantity = () => {\n    return items.reduce((total, item) => total + (item.quantity || 1), 0);\n  };\n\n  // Tính giảm giá khi mua nhiều\n  const getBulkDiscount = () => {\n    const totalQty = getTotalQuantity();\n    if (totalQty >= promoSettings.bulk_threshold && promoSettings.bulk_discount > 0) {\n      const subtotal = getSubtotal();\n      return Math.round(subtotal * promoSettings.bulk_discount / 100);\n    }\n    return 0;\n  };\n\n  // Xử lý áp dụng voucher\n  const handleApplyVoucher = async () => {\n    if (!voucherCode.trim()) {\n      setVoucherError('Vui lòng nhập mã voucher');\n      return;\n    }\n    try {\n      const response = await axios.post('/api/vouchers/validate', {\n        code: voucherCode.trim()\n      });\n      const voucher = response.data;\n      const subtotal = getSubtotal() - getBulkDiscount();\n\n      // Check minimum order amount\n      if (subtotal < voucher.min_order_amount) {\n        setVoucherError(`Đơn hàng tối thiểu ${formatVND(voucher.min_order_amount)} để sử dụng voucher này`);\n        setVoucherDiscount(0);\n        return;\n      }\n\n      // Calculate discount\n      let discount = 0;\n      if (voucher.discount_type === 'percent') {\n        discount = Math.round(subtotal * voucher.discount_value / 100);\n        if (voucher.max_discount && discount > voucher.max_discount) {\n          discount = voucher.max_discount;\n        }\n      } else {\n        discount = voucher.discount_value;\n      }\n      setVoucherDiscount(discount);\n      setVoucherError('');\n      toast.success('Áp dụng voucher thành công!');\n    } catch (error) {\n      var _error$response, _error$response$data;\n      setVoucherError(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || 'Mã voucher không hợp lệ');\n      setVoucherDiscount(0);\n    }\n  };\n\n  // Tính tổng giảm giá (bulk + voucher)\n  const getTotalDiscount = () => {\n    return getBulkDiscount() + voucherDiscount;\n  };\n\n  // Hàm xử lý chuyển hướng sang trang Checkout khi nhấn nút \"Proceed To Checkout\"\n  const handleProceedToCheckout = () => {\n    navigate('/checkout'); // Chuyển hướng đến trang Checkout\n  };\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container-fluid bg-secondary mb-5\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex flex-column align-items-center justify-content-center\",\n        style: {\n          minHeight: '300px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"font-weight-semi-bold text-uppercase mb-3\",\n          children: \"Gi\\u1ECF h\\xE0ng\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-inline-flex\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"m-0\",\n            children: /*#__PURE__*/_jsxDEV(\"a\", {\n              href: \"Index\",\n              children: \"Trang ch\\u1EE7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 44\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"m-0 px-2\",\n            children: \"-\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"m-0\",\n            children: \"Gi\\u1ECF h\\xE0ng\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container-fluid pt-5\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row px-xl-5\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-lg-8 table-responsive mb-5\",\n          children: items.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Gi\\u1ECF h\\xE0ng c\\u1EE7a b\\u1EA1n hi\\u1EC7n t\\u1EA1i ch\\u01B0a c\\xF3 s\\u1EA3n ph\\u1EA9m n\\xE0o.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 29\n          }, this) : /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"table table-bordered mb-0\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              className: \"bg-secondary text-dark\",\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"S\\u1EA3n ph\\u1EA9m\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 183,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Gi\\xE1\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 184,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"S\\u1ED1 l\\u01B0\\u1EE3ng\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 185,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"T\\u1ED5ng\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 186,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"X\\xF3a\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 187,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 182,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              className: \"align-middle\",\n              children: items.map(item => /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"align-middle text-start\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"d-flex align-items-center\",\n                    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                      src: item.img,\n                      alt: \"\",\n                      style: {\n                        width: \"56px\"\n                      },\n                      className: \"me-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 196,\n                      columnNumber: 53\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: item.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 197,\n                      columnNumber: 53\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 195,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 194,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"align-middle text-center\",\n                  children: formatVND(parseVND(item.price))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 200,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"align-middle\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"input-group input-group-sm\",\n                    style: {\n                      width: '110px',\n                      margin: '0 auto'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"btn btn-outline-secondary btn-sm\",\n                      onClick: () => updateQuantity(item.id, -1),\n                      children: /*#__PURE__*/_jsxDEV(\"i\", {\n                        className: \"fas fa-minus\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 204,\n                        columnNumber: 57\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 203,\n                      columnNumber: 53\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"text\",\n                      className: \"form-control form-control-sm text-center\",\n                      value: item.quantity,\n                      readOnly: true\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 206,\n                      columnNumber: 53\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"btn btn-outline-secondary btn-sm\",\n                      onClick: () => updateQuantity(item.id, 1),\n                      children: /*#__PURE__*/_jsxDEV(\"i\", {\n                        className: \"fas fa-plus\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 208,\n                        columnNumber: 57\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 207,\n                      columnNumber: 53\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 202,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 201,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"align-middle text-center\",\n                  children: formatVND(parseVND(item.price) * (item.quantity || 1))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 212,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"align-middle text-center\",\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn btn-outline-danger btn-sm\",\n                    onClick: () => removeItem(item.id),\n                    children: /*#__PURE__*/_jsxDEV(\"i\", {\n                      className: \"fa fa-times\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 215,\n                      columnNumber: 53\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 214,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 213,\n                  columnNumber: 45\n                }, this)]\n              }, item.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 41\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-lg-4\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card border-secondary mb-5\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-header bg-secondary border-0\",\n              children: /*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"font-weight-semi-bold m-0\",\n                children: \"T\\xF3m t\\u1EAFt gi\\u1ECF h\\xE0ng\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 228,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-body\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex justify-content-between mb-2 pt-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n                  className: \"font-weight-medium\",\n                  children: \"T\\u1ED5ng ph\\u1EE5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 232,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n                  className: \"font-weight-medium\",\n                  children: formatVND(getSubtotal())\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 233,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 231,\n                columnNumber: 33\n              }, this), getBulkDiscount() > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex justify-content-between mb-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n                    className: \"font-weight-medium mb-0 text-success\",\n                    children: \"Gi\\u1EA3m gi\\xE1 mua nhi\\u1EC1u\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 238,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                    className: \"text-muted\",\n                    children: [\"Mua t\\u1EEB \", promoSettings.bulk_threshold, \" s\\u1EA3n ph\\u1EA9m: -\", promoSettings.bulk_discount, \"%\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 239,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 237,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n                  className: \"font-weight-medium text-success\",\n                  children: [\"-\", formatVND(getBulkDiscount())]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 241,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 236,\n                columnNumber: 37\n              }, this), promoSettings.enable_voucher && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mb-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"input-group input-group-sm\",\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    className: `form-control ${voucherError ? 'is-invalid' : ''}`,\n                    placeholder: \"Nh\\u1EADp m\\xE3 voucher\",\n                    value: voucherCode,\n                    onChange: e => {\n                      setVoucherCode(e.target.value);\n                      setVoucherError('');\n                    },\n                    onKeyPress: e => {\n                      if (e.key === 'Enter') handleApplyVoucher();\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 247,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn btn-outline-primary\",\n                    type: \"button\",\n                    onClick: handleApplyVoucher,\n                    children: \"\\xC1p d\\u1EE5ng\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 260,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 246,\n                  columnNumber: 41\n                }, this), voucherError && /*#__PURE__*/_jsxDEV(\"small\", {\n                  className: \"text-danger d-block mt-1\",\n                  children: voucherError\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 268,\n                  columnNumber: 58\n                }, this), voucherDiscount > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"d-flex justify-content-between mt-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"small\", {\n                    className: \"text-success\",\n                    children: [\"Voucher: \", voucherCode]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 271,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                    className: \"text-success fw-bold\",\n                    children: [\"-\", formatVND(voucherDiscount)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 272,\n                    columnNumber: 49\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 270,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                  className: \"d-block mt-2\",\n                  children: /*#__PURE__*/_jsxDEV(Link, {\n                    to: \"/vouchers\",\n                    children: \"V\\xE0o kho voucher \\u0111\\u1EC3 nh\\u1EADn th\\xEAm \\u01B0u \\u0111\\xE3i\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 276,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 275,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 245,\n                columnNumber: 37\n              }, this), getTotalQuantity() < promoSettings.bulk_threshold && promoSettings.bulk_discount > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"alert alert-info py-2 mb-0\",\n                children: /*#__PURE__*/_jsxDEV(\"small\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fa fa-info-circle me-1\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 283,\n                    columnNumber: 45\n                  }, this), \"Mua th\\xEAm \", promoSettings.bulk_threshold - getTotalQuantity(), \" s\\u1EA3n ph\\u1EA9m \\u0111\\u1EC3 \\u0111\\u01B0\\u1EE3c gi\\u1EA3m \", promoSettings.bulk_discount, \"%\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 282,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 281,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 230,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-footer border-secondary bg-transparent\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex justify-content-between mt-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                  className: \"font-weight-bold\",\n                  children: \"T\\u1ED5ng c\\u1ED9ng\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 291,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n                  className: \"font-weight-bold\",\n                  children: formatVND(getSubtotal() - getTotalDiscount())\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 292,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 290,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-block btn-primary my-3 py-3\",\n                onClick: handleProceedToCheckout,\n                children: \"Thanh to\\xE1n\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 294,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-block btn-danger my-3 py-3\",\n                onClick: clearCart,\n                children: \"X\\xF3a gi\\u1ECF h\\xE0ng\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 297,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 289,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 158,\n    columnNumber: 9\n  }, this);\n}\n_s(Cart, \"8S/azvsO+HAOPSro53gdFDty6Fs=\", false, function () {\n  return [useNavigate];\n});\n_c = Cart;\nexport default Cart;\nvar _c;\n$RefreshReg$(_c, \"Cart\");","map":{"version":3,"names":["React","useState","useEffect","Fragment","useRef","useContext","useNavigate","Link","Header","Footer","toast","parseVND","formatVND","CartContext","axios","jsxDEV","_jsxDEV","Cart","_s","navigate","cart","items","addToCart","decreaseQuantity","removeFromCart","clearCart","contextClearCart","pendingClear","setPendingClear","clearTimerRef","promoSettings","setPromoSettings","bulk_discount","bulk_threshold","enable_voucher","voucherCode","setVoucherCode","voucherDiscount","setVoucherDiscount","voucherError","setVoucherError","updateQuantity","id","delta","item","find","i","quantity","removeItem","getSubtotal","reduce","total","price","warning","current","clearTimeout","setTimeout","success","get","then","response","data","settings","Object","keys","forEach","key","value","parseInt","catch","error","console","getTotalQuantity","getBulkDiscount","totalQty","subtotal","Math","round","handleApplyVoucher","trim","post","code","voucher","min_order_amount","discount","discount_type","discount_value","max_discount","_error$response","_error$response$data","message","getTotalDiscount","handleProceedToCheckout","children","fileName","_jsxFileName","lineNumber","columnNumber","className","style","minHeight","href","length","map","src","img","alt","width","name","margin","onClick","type","readOnly","placeholder","onChange","e","target","onKeyPress","to","_c","$RefreshReg$"],"sources":["C:/Trần Minh Quý/Chuyên đề Nodejs và React/2200008995_TranMinhQuy/2200008995_TranMinhQuy/ProjectReactNodejs/SHOPBANSACH/frontend/src/pages/Cart.js"],"sourcesContent":["import React, { useState, useEffect, Fragment, useRef, useContext } from \"react\";\nimport { useNavigate, Link } from 'react-router-dom'; // Import useNavigate để điều hướng\nimport Header from \"./Header\";\nimport Footer from \"./Footer\";\nimport { toast } from 'react-toastify';\nimport { parseVND, formatVND } from '../utils/currency';\nimport { CartContext } from './CartContext';\nimport axios from 'axios';\n\nfunction Cart() {\n    const navigate = useNavigate(); // Tạo hàm điều hướng\n\n    const { cart: items, addToCart, decreaseQuantity, removeFromCart, clearCart: contextClearCart } = useContext(CartContext);\n    const [pendingClear, setPendingClear] = useState(false);\n    const clearTimerRef = useRef(null);\n    const [promoSettings, setPromoSettings] = useState({\n        bulk_discount: 0,\n        bulk_threshold: 5,\n        enable_voucher: false\n    });\n    const [voucherCode, setVoucherCode] = useState('');\n    const [voucherDiscount, setVoucherDiscount] = useState(0);\n    const [voucherError, setVoucherError] = useState('');\n\n    // Hàm cập nhật số lượng sản phẩm\n    const updateQuantity = (id, delta) => {\n        if (delta > 0) {\n            // increase: dùng addToCart với quantity 1\n            const item = items.find(i => i.id === id);\n            if (item) addToCart({ ...item, quantity: 1 });\n        } else if (delta < 0) {\n            // decrease: gọi decreaseQuantity\n            decreaseQuantity(id);\n        }\n    };\n\n    // Hàm xóa sản phẩm khỏi giỏ hàng\n    const removeItem = (id) => {\n        removeFromCart(id);\n    };\n\n    // Hàm tính tổng phụ (subtotal) của giỏ hàng\n    const getSubtotal = () => {\n        return items.reduce((total, item) => total + parseVND(item.price) * (item.quantity || 1), 0);\n    };\n\n    // Hàm xóa toàn bộ giỏ hàng (xác nhận không chặn: nhấn 2 lần trong 3s)\n    const clearCart = () => {\n        if (!pendingClear) {\n            setPendingClear(true);\n            toast.warning('Nhấn lại lần nữa trong 3 giây để xác nhận xóa giỏ hàng');\n            if (clearTimerRef.current) clearTimeout(clearTimerRef.current);\n            clearTimerRef.current = setTimeout(() => setPendingClear(false), 3000);\n            return;\n        }\n        setPendingClear(false);\n        if (clearTimerRef.current) {\n            clearTimeout(clearTimerRef.current);\n            clearTimerRef.current = null;\n        }\n        contextClearCart();\n        toast.success('Đã xóa toàn bộ giỏ hàng');\n    };\n\n    // Dọn dẹp timer khi unmount\n    useEffect(() => {\n        return () => {\n            if (clearTimerRef.current) clearTimeout(clearTimerRef.current);\n        };\n    }, []);\n\n    // Fetch promo settings\n    useEffect(() => {\n        axios.get('/api/settings')\n            .then(response => {\n                if (response.data && typeof response.data === 'object') {\n                    const settings = {};\n                    Object.keys(response.data).forEach(key => {\n                        settings[key] = response.data[key].value || '';\n                    });\n                    setPromoSettings({\n                        bulk_discount: parseInt(settings['promo.bulk_discount']) || 0,\n                        bulk_threshold: parseInt(settings['promo.bulk_threshold']) || 5,\n                        enable_voucher: settings['promo.enable_voucher'] === 'true'\n                    });\n                }\n            })\n            .catch(error => {\n                console.error('Error fetching promo settings:', error);\n            });\n    }, []);\n\n    // Tính tổng số lượng sản phẩm\n    const getTotalQuantity = () => {\n        return items.reduce((total, item) => total + (item.quantity || 1), 0);\n    };\n\n    // Tính giảm giá khi mua nhiều\n    const getBulkDiscount = () => {\n        const totalQty = getTotalQuantity();\n        if (totalQty >= promoSettings.bulk_threshold && promoSettings.bulk_discount > 0) {\n            const subtotal = getSubtotal();\n            return Math.round(subtotal * promoSettings.bulk_discount / 100);\n        }\n        return 0;\n    };\n\n    // Xử lý áp dụng voucher\n    const handleApplyVoucher = async () => {\n        if (!voucherCode.trim()) {\n            setVoucherError('Vui lòng nhập mã voucher');\n            return;\n        }\n        \n        try {\n            const response = await axios.post('/api/vouchers/validate', { code: voucherCode.trim() });\n            const voucher = response.data;\n            const subtotal = getSubtotal() - getBulkDiscount();\n            \n            // Check minimum order amount\n            if (subtotal < voucher.min_order_amount) {\n                setVoucherError(`Đơn hàng tối thiểu ${formatVND(voucher.min_order_amount)} để sử dụng voucher này`);\n                setVoucherDiscount(0);\n                return;\n            }\n            \n            // Calculate discount\n            let discount = 0;\n            if (voucher.discount_type === 'percent') {\n                discount = Math.round(subtotal * voucher.discount_value / 100);\n                if (voucher.max_discount && discount > voucher.max_discount) {\n                    discount = voucher.max_discount;\n                }\n            } else {\n                discount = voucher.discount_value;\n            }\n            \n            setVoucherDiscount(discount);\n            setVoucherError('');\n            toast.success('Áp dụng voucher thành công!');\n        } catch (error) {\n            setVoucherError(error.response?.data?.message || 'Mã voucher không hợp lệ');\n            setVoucherDiscount(0);\n        }\n    };\n\n    // Tính tổng giảm giá (bulk + voucher)\n    const getTotalDiscount = () => {\n        return getBulkDiscount() + voucherDiscount;\n    };\n\n    // Hàm xử lý chuyển hướng sang trang Checkout khi nhấn nút \"Proceed To Checkout\"\n    const handleProceedToCheckout = () => {\n        navigate('/checkout'); // Chuyển hướng đến trang Checkout\n    };\n\n    return (\n        <Fragment>\n            <Header />\n            <div className=\"container-fluid bg-secondary mb-5\">\n                <div\n                    className=\"d-flex flex-column align-items-center justify-content-center\"\n                    style={{ minHeight: '300px' }} >\n                    <h1 className=\"font-weight-semi-bold text-uppercase mb-3\">Giỏ hàng</h1>\n                    <div className=\"d-inline-flex\">\n                        <p className=\"m-0\"><a href=\"Index\">Trang chủ</a></p>\n                        <p className=\"m-0 px-2\">-</p>\n                        <p className=\"m-0\">Giỏ hàng</p>\n                    </div>\n                </div>\n            </div>\n\n            <div className=\"container-fluid pt-5\">\n                <div className=\"row px-xl-5\">\n                    <div className=\"col-lg-8 table-responsive mb-5\">\n                        {/* Hiển thị thông báo nếu giỏ hàng trống */}\n                        {items.length === 0 ? (\n                            <p>Giỏ hàng của bạn hiện tại chưa có sản phẩm nào.</p>\n                        ) : (\n                            <table className=\"table table-bordered mb-0\">\n                                <thead className=\"bg-secondary text-dark\">\n                                    <tr>\n                                        <th>Sản phẩm</th>\n                                        <th>Giá</th>\n                                        <th>Số lượng</th>\n                                        <th>Tổng</th>\n                                        <th>Xóa</th>\n                                    </tr>\n                                </thead>\n                                <tbody className=\"align-middle\">\n                                    {/* Hiển thị danh sách sản phẩm trong giỏ hàng */}\n                                    {items.map((item) => (\n                                        <tr key={item.id}>\n                                            <td className=\"align-middle text-start\">\n                                                <div className=\"d-flex align-items-center\">\n                                                    <img src={item.img} alt=\"\" style={{ width: \"56px\" }} className=\"me-2\" />\n                                                    <span>{item.name}</span>\n                                                </div>\n                                            </td>\n                                            <td className=\"align-middle text-center\">{formatVND(parseVND(item.price))}</td>\n                                            <td className=\"align-middle\">\n                                                <div className=\"input-group input-group-sm\" style={{ width: '110px', margin: '0 auto' }}>\n                                                    <button className=\"btn btn-outline-secondary btn-sm\" onClick={() => updateQuantity(item.id, -1)}>\n                                                        <i className=\"fas fa-minus\"></i>\n                                                    </button>\n                                                    <input type=\"text\" className=\"form-control form-control-sm text-center\" value={item.quantity} readOnly />\n                                                    <button className=\"btn btn-outline-secondary btn-sm\" onClick={() => updateQuantity(item.id, 1)}>\n                                                        <i className=\"fas fa-plus\"></i>\n                                                    </button>\n                                                </div>\n                                            </td>\n                                            <td className=\"align-middle text-center\">{formatVND(parseVND(item.price) * (item.quantity || 1))}</td>\n                                            <td className=\"align-middle text-center\">\n                                                <button className=\"btn btn-outline-danger btn-sm\" onClick={() => removeItem(item.id)}>\n                                                    <i className=\"fa fa-times\"></i>\n                                                </button>\n                                            </td>\n                                        </tr>\n                                    ))}\n                                </tbody>\n                            </table>\n                        )}\n                    </div>\n\n                    <div className=\"col-lg-4\">\n                        <div className=\"card border-secondary mb-5\">\n                            <div className=\"card-header bg-secondary border-0\">\n                                <h4 className=\"font-weight-semi-bold m-0\">Tóm tắt giỏ hàng</h4>\n                            </div>\n                            <div className=\"card-body\">\n                                <div className=\"d-flex justify-content-between mb-2 pt-1\">\n                                    <h6 className=\"font-weight-medium\">Tổng phụ</h6>\n                                    <h6 className=\"font-weight-medium\">{formatVND(getSubtotal())}</h6>\n                                </div>\n                                {getBulkDiscount() > 0 && (\n                                    <div className=\"d-flex justify-content-between mb-2\">\n                                        <div>\n                                            <h6 className=\"font-weight-medium mb-0 text-success\">Giảm giá mua nhiều</h6>\n                                            <small className=\"text-muted\">Mua từ {promoSettings.bulk_threshold} sản phẩm: -{promoSettings.bulk_discount}%</small>\n                                        </div>\n                                        <h6 className=\"font-weight-medium text-success\">-{formatVND(getBulkDiscount())}</h6>\n                                    </div>\n                                )}\n                                {promoSettings.enable_voucher && (\n                                    <div className=\"mb-2\">\n                                        <div className=\"input-group input-group-sm\">\n                                            <input \n                                                type=\"text\" \n                                                className={`form-control ${voucherError ? 'is-invalid' : ''}`}\n                                                placeholder=\"Nhập mã voucher\"\n                                                value={voucherCode}\n                                                onChange={(e) => {\n                                                    setVoucherCode(e.target.value);\n                                                    setVoucherError('');\n                                                }}\n                                                onKeyPress={(e) => {\n                                                    if (e.key === 'Enter') handleApplyVoucher();\n                                                }}\n                                            />\n                                            <button \n                                                className=\"btn btn-outline-primary\" \n                                                type=\"button\"\n                                                onClick={handleApplyVoucher}\n                                            >\n                                                Áp dụng\n                                            </button>\n                                        </div>\n                                        {voucherError && <small className=\"text-danger d-block mt-1\">{voucherError}</small>}\n                                        {voucherDiscount > 0 && (\n                                            <div className=\"d-flex justify-content-between mt-2\">\n                                                <small className=\"text-success\">Voucher: {voucherCode}</small>\n                                                <small className=\"text-success fw-bold\">-{formatVND(voucherDiscount)}</small>\n                                            </div>\n                                        )}\n                                        <small className=\"d-block mt-2\">\n                                            <Link to=\"/vouchers\">Vào kho voucher để nhận thêm ưu đãi</Link>\n                                        </small>\n                                    </div>\n                                )}\n                                {getTotalQuantity() < promoSettings.bulk_threshold && promoSettings.bulk_discount > 0 && (\n                                    <div className=\"alert alert-info py-2 mb-0\">\n                                        <small>\n                                            <i className=\"fa fa-info-circle me-1\"></i>\n                                            Mua thêm {promoSettings.bulk_threshold - getTotalQuantity()} sản phẩm để được giảm {promoSettings.bulk_discount}%\n                                        </small>\n                                    </div>\n                                )}\n                            </div>\n                            <div className=\"card-footer border-secondary bg-transparent\">\n                                <div className=\"d-flex justify-content-between mt-2\">\n                                    <h5 className=\"font-weight-bold\">Tổng cộng</h5>\n                                    <h5 className=\"font-weight-bold\">{formatVND(getSubtotal() - getTotalDiscount())}</h5>\n                                </div>\n                                <button className=\"btn btn-block btn-primary my-3 py-3\" onClick={handleProceedToCheckout}>\n                                   Thanh toán\n                                </button>\n                                <button className=\"btn btn-block btn-danger my-3 py-3\" onClick={clearCart}>Xóa giỏ hàng</button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <Footer />\n        </Fragment>\n    );\n}\n\nexport default Cart;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}