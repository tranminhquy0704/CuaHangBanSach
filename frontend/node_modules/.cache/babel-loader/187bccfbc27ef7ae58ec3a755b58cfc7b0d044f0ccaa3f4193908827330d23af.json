{"ast":null,"code":"import React,{useMemo,useState}from'react';import{formatVND}from'../utils/currency';// Weekly Best-seller Ranking mock based on simple points derived from sold count\n// Tabs for categories; we infer by name keywords for demo\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const CATS=[{key:'vanhoc',title:'Văn học',kw:['mưa','nhà giả','bến xe','văn học']},{key:'kinhte',title:'Kinh Tế',kw:['kinh tế','doanh','marketing']},{key:'tamly',title:'Tâm lý - Kỹ năng sống',kw:['tâm lý','kỹ năng','sống']},{key:'thieunhi',title:'Thiếu nhi',kw:['thiếu nhi','trẻ','kid']},{key:'ngoaiNgu',title:'Sách học ngoại ngữ',kw:['english','tiếng anh','toeic','ielts']},{key:'foreign',title:'Foreign books',kw:['english','foreign']},{key:'other',title:'Thể loại khác',kw:[]}];function filterByKw(products,kw){const k=kw.map(s=>s.toLowerCase());const list=products.filter(p=>k.length===0||k.some(x=>String(p.name||'').toLowerCase().includes(x)));return list.map(p=>({...p,points:(p.sold||0)+Math.floor((p.rating||4.5)*100)})).sort((a,b)=>b.points-a.points).slice(0,5);}const HomeWeeklyRanking=_ref=>{let{products=[]}=_ref;const[tab,setTab]=useState(CATS[0].key);const items=useMemo(()=>{return products.map(p=>({...p,points:(p.sold||0)+Math.floor((p.rating||4.5)*100)})).sort((a,b)=>b.points-a.points).slice(0,5);},[products]);const featured=items[0];return/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid pt-5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-center mb-4\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"section-title px-5\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-2\",children:\"B\\u1EA3ng x\\u1EBFp h\\u1EA1ng b\\xE1n ch\\u1EA1y tu\\u1EA7n\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"row px-xl-5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 col-lg-5\",children:items.map((p,idx)=>/*#__PURE__*/_jsxs(\"a\",{href:`/shopdetail/${p.id}`,className:\"d-flex align-items-center py-2 text-decoration-none\",style:{borderBottom:'1px solid #f3f3f3',color:'inherit'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-success me-2\",style:{width:28},children:String(idx+1).padStart(2,'0')}),/*#__PURE__*/_jsx(\"img\",{src:p.img,alt:p.name,style:{width:40,height:56,objectFit:'cover'},className:\"me-2\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-grow-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"fw-semibold text-truncate\",title:p.name,children:p.name}),/*#__PURE__*/_jsx(\"div\",{className:\"text-muted small\",children:p.author||''}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-muted small\",children:[(p.points||0).toLocaleString(),\" \\u0111i\\u1EC3m\"]})]})]},p.id))}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 col-lg-7\",children:featured?/*#__PURE__*/_jsxs(\"a\",{href:`/shopdetail/${featured.id}`,className:\"row text-decoration-none\",style:{color:'inherit'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-6\",children:/*#__PURE__*/_jsx(\"img\",{src:featured.img,alt:featured.name,className:\"w-100\",style:{objectFit:'cover',borderRadius:8}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-sm-6\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"fw-bold\",children:featured.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-muted mb-2\",children:[\"T\\xE1c gi\\u1EA3: \",featured.author||'Đang cập nhật']}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-danger fw-bold me-2\",children:formatVND(featured.price)}),featured.oldPrice&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-muted text-decoration-line-through me-2\",children:formatVND(featured.oldPrice)}),/*#__PURE__*/_jsxs(\"span\",{className:\"badge bg-warning text-dark\",children:[\"-\",Math.round((1-featured.price/featured.oldPrice)*100),\"%\"]})]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",style:{maxHeight:140,overflow:'hidden'},children:featured.description||'Mô tả đang cập nhật...'})]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"text-muted\",children:\"Kh\\xF4ng c\\xF3 d\\u1EEF li\\u1EC7u\"})})]})]});};export default HomeWeeklyRanking;","map":{"version":3,"names":["React","useMemo","useState","formatVND","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CATS","key","title","kw","filterByKw","products","k","map","s","toLowerCase","list","filter","p","length","some","x","String","name","includes","points","sold","Math","floor","rating","sort","a","b","slice","HomeWeeklyRanking","_ref","tab","setTab","items","featured","className","children","idx","href","id","style","borderBottom","color","width","padStart","src","img","alt","height","objectFit","author","toLocaleString","borderRadius","price","oldPrice","round","maxHeight","overflow","description"],"sources":["C:/Trần Minh Quý/Chuyên đề Nodejs và React/2200008995_TranMinhQuy/2200008995_TranMinhQuy/ProjectReactNodejs/SHOPBANSACH/frontend/src/pages/HomeWeeklyRanking.js"],"sourcesContent":["import React, { useMemo, useState } from 'react';\nimport { formatVND } from '../utils/currency';\n\n// Weekly Best-seller Ranking mock based on simple points derived from sold count\n// Tabs for categories; we infer by name keywords for demo\nconst CATS = [\n  { key: 'vanhoc', title: 'Văn học', kw: ['mưa', 'nhà giả', 'bến xe', 'văn học'] },\n  { key: 'kinhte', title: 'Kinh Tế', kw: ['kinh tế', 'doanh', 'marketing'] },\n  { key: 'tamly', title: 'Tâm lý - Kỹ năng sống', kw: ['tâm lý', 'kỹ năng', 'sống'] },\n  { key: 'thieunhi', title: 'Thiếu nhi', kw: ['thiếu nhi', 'trẻ', 'kid'] },\n  { key: 'ngoaiNgu', title: 'Sách học ngoại ngữ', kw: ['english', 'tiếng anh', 'toeic', 'ielts'] },\n  { key: 'foreign', title: 'Foreign books', kw: ['english', 'foreign'] },\n  { key: 'other', title: 'Thể loại khác', kw: [] },\n];\n\nfunction filterByKw(products, kw) {\n  const k = kw.map(s => s.toLowerCase());\n  const list = products.filter(p => k.length === 0 || k.some(x => String(p.name||'').toLowerCase().includes(x)));\n  return list\n    .map(p => ({...p, points: (p.sold || 0) + Math.floor((p.rating || 4.5) * 100)}))\n    .sort((a,b) => b.points - a.points)\n    .slice(0, 5);\n}\n\nconst HomeWeeklyRanking = ({ products = [] }) => {\n  const [tab, setTab] = useState(CATS[0].key);\n\n  const items = useMemo(() => {\n    return products\n      .map(p => ({...p, points: (p.sold || 0) + Math.floor((p.rating || 4.5) * 100)}))\n      .sort((a,b) => b.points - a.points)\n      .slice(0, 5);\n  }, [products]);\n\n  const featured = items[0];\n\n  return (\n    <div className=\"container-fluid pt-5\">\n      <div className=\"text-center mb-4\">\n        <h2 className=\"section-title px-5\">\n          <span className=\"px-2\">Bảng xếp hạng bán chạy tuần</span>\n        </h2>\n      </div>\n      \n      <div className=\"row px-xl-5\">\n        <div className=\"col-md-6 col-lg-5\">\n          {items.map((p, idx) => (\n            <a key={p.id} href={`/shopdetail/${p.id}`} className=\"d-flex align-items-center py-2 text-decoration-none\" style={{borderBottom:'1px solid #f3f3f3', color: 'inherit'}}>\n              <div className=\"text-success me-2\" style={{width:28}}>{String(idx+1).padStart(2,'0')}</div>\n              <img src={p.img} alt={p.name} style={{width:40, height:56, objectFit:'cover'}} className=\"me-2\"/>\n              <div className=\"flex-grow-1\">\n                <div className=\"fw-semibold text-truncate\" title={p.name}>{p.name}</div>\n                <div className=\"text-muted small\">{p.author || ''}</div>\n                <div className=\"text-muted small\">{(p.points||0).toLocaleString()} điểm</div>\n              </div>\n            </a>\n          ))}\n        </div>\n        <div className=\"col-md-6 col-lg-7\">\n          {featured ? (\n            <a href={`/shopdetail/${featured.id}`} className=\"row text-decoration-none\" style={{color: 'inherit'}}>\n              <div className=\"col-sm-6\">\n                <img src={featured.img} alt={featured.name} className=\"w-100\" style={{objectFit:'cover', borderRadius:8}}/>\n              </div>\n              <div className=\"col-sm-6\">\n                <h5 className=\"fw-bold\">{featured.name}</h5>\n                <div className=\"text-muted mb-2\">Tác giả: {featured.author || 'Đang cập nhật'}</div>\n                <div className=\"mb-2\">\n                  <span className=\"text-danger fw-bold me-2\">{formatVND(featured.price)}</span>\n                  {/* sale/discount mock if exists */}\n                  {featured.oldPrice && (\n                    <>\n                      <span className=\"text-muted text-decoration-line-through me-2\">{formatVND(featured.oldPrice)}</span>\n                      <span className=\"badge bg-warning text-dark\">-{Math.round((1 - featured.price/featured.oldPrice)*100)}%</span>\n                    </>\n                  )}\n                </div>\n                <p className=\"text-muted\" style={{maxHeight:140, overflow:'hidden'}}>\n                  {featured.description || 'Mô tả đang cập nhật...'}\n                </p>\n              </div>\n            </a>\n          ) : (\n            <div className=\"text-muted\">Không có dữ liệu</div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default HomeWeeklyRanking;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}